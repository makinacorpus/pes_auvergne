<!DOCTYPE html>
<html>
<head>
    <title>API - Documentation</title>
    <meta charset="utf-8" />
    <style type="text/css" media="screen">
    h2 {
        background-color: #CCC;
        border: solid 1px #AAA;
        border-left: none;
        border-right: none;
        padding: .2em;
        text-align: center;
    }
    h3 {
        background-color: #EEE;
        border: solid 1px #CCC;
        border-left: none;
        border-right: none;
        padding: .2em;
    }
    </style>
</head>
<body>
    <section>
        <h2>API Key</h2>
        <p>
        Create and update requests (HTTP PUT) require to provide an API key in the request
        url.
        </p>
        <p>
        Exemple:
        </p>
        <pre>
            PUT /api/organizations/MRjCUntUYHKRwcdaL6YVUh?api_key=MyPrivateKey
        </pre>
    </section>
    <section>
        <h2>Organizations</h2>
        <h3>Organization structure</h3>
        <pre>
        {
            "acronym": "test",
            "annual_revenue": 42,
            "birth": "2013-01-01",
            "contacts": [
                {
                    "content": "00.00.00.00.00",
                    "uuid": "33746d9321fd4d6db5449950878510ed" 
                },
                …
            ],
            "legal_status": "legal_status_slug",
            "members": [
                {
                    "person": "9b9eec5c5d4a462790b8f596adc0f33d",
                    "role": "462790b8f596adc0f33d9b9eec5c5d4a",
                }
                …
            ],
            "pref_address": "0f147020efb74d2d8729242c8d2f7e03",
            "pref_email": "9b9eec5c5d4a462790b8f596adc0f33d",
            "pref_phone": "33746d9321fd4d6db5449950878510ed",
            "short_description": "Lorem ipsum…",
            "testimony": "Lorem ipsum…",
            "title": "Test Organization",
            "transverse_themes": [
                3, …
            ],
            "uuid": "6c7b266e58174207add94cb64d3f8a5f",
            "web": "http://test.local",
            "workforce": 4.2
        }
        </pre>
        <p>Where:
            <dl>
                <dt><b>members</b></dt>
                <dd>
                    A list of existing person/role pairs.
                    They must exist when the organization is created.
                </dd>
                <dt><b>pref_address</b></dt>
                <dd>
                    An existing person/organization contact or an owned contact.
                </dd>
                <dt><b>pref_email</b></dt>
                <dd>
                    An existing person/organization contact or an owned contact.
                </dd>
            </dl>
        </p>
        <h3>End Points</h3>
        <dl>
            <dt><b>GET /api/organizations/</b></dt>
            <dd>
                <p>List all organizations.</p>
            </dd>
            <dt><b>GET /api/organizations/:uuid</b></dt>
            <dd>
                <p>Get an organization by its uuid.</p>
            </dd>
            <dt><b>DELETE /api/organizations/:uuid</b></dt>
            <dd>
                <p>Delete an organization by its uuid.</p>
            </dd>
            <dt><b>PUT /api/organizations/:uuid?api_key=:api_key</b></dt>
            <dd>
                <p>Create or update an organization.</p>
            </dd>
        </dl>
    </section>
    <section>
        <h2>Persons</h2>
        <h3>Persons structure</h3>
        <pre>
        {
            "first_name": "First Name",
            "last_name": "Last Name",
            "contacts": [
                {
                    "content": "00.00.00.00.00",
                    "uuid": "33746d9321fd4d6db5449950878510ed" 
                },
                …
            ],
            "pref_email": "9b9eec5c5d4a462790b8f596adc0f33d",
            "uuid": "6c7b266e58174207add94cb64d3f8a5f",
        }
        </pre>
        <p>Where:
            <dl>
                <dt><b>pref_email</b></dt>
                <dd>
                    An existing person/organization contact or an owned contact.
                </dd>
            </dl>
        </p>
        <h3>End Points</h3>
        <dl>
            <dt><b>GET /api/persons/</b><dt>
            <dd>
                <p>List all persons.</p>
            </dd>
            <dt><b>GET /api/persons/:uuid</b><dt>
            <dd>
                <p>Get a person by its uuid.</p>
            </dd>
            <dt><b>DELETE /api/persons/:uuid</b></dt>
            <dd>
                <p>Delete an person by its uuid.</p>
            </dd>
            <dt><b>PUT /api/persons/:uuid?api_key=:api_key</b></dt>
            <dd>
                <p>Create or update a person.</p>
            </dd>
        </dl>
    </section>
    <section>
        <h2>Transverse Themes</h2>
        <h3>End Points</h3>
        <dl>
            <dt><b>GET /api/transverse_themes/</b><dt>
            <dd>
                <p>List all transverse themes.</p>
            </dd>
        </dl>
        <h3>Transverse Themes structure</h3>
        <pre>
        {
            "id": 1,
            "name": "Theme Name"
        }
        </pre>
    </section>
    <section>
        <h2>Roles</h2>
        <h3>End Points</h3>
        <dl>
            <dt><b>GET /api/roles/</b><dt>
            <dd>
                <p>List all roles.</p>
            </dd>
        </dl>
        <h3>Roles structure</h3>
        <pre>
        {
            "uuid": "DhkrWCaL6YVmrJcuNTuYUh",
            "label": "Role Label"
            "slug": "role-label",
        }
        </pre>
    </section>
    <section>
        <h2>Legal Statuses</h2>
        <h3>End Points</h3>
        <dl>
            <dt><b>GET /api/legal_statuses/</b><dt>
            <dd>
                <p>List all legal statuses.</p>
            </dd>
        </dl>
        <h3>Legal Statuses structure</h3>
        <pre>
        {
            "label": "Legal Status Label"
            "slug": 'legal-status-label',
        }
        </pre>
    </section>
    <section>
        <h2>Activity Nomenclatures</h2>
        <h3>End Points</h3>
        <dl>
            <dt><b>GET /api/activity_nomenclatures/</b><dt>
            <dd>
                <p>List all activity nomenclatures.</p>
            </dd>
        </dl>
        <h3>Activity Nomenclature structure</h3>
        <pre>
        {
            "id": 42,
            "label": "Activity nomenclature label",
        }
        </pre>
    </section>
    <section>
        <h2>Calendar</h2>
        <h3>End Points</h3>
        <dl>
            <dt><b>GET /api/calendars/</b><dt>
            <dd>
                <p>List all calendars.</p>
            </dd>
        </dl>
        <h3>Calendar structure</h3>
        <pre>
        {
            "uuid": "n4kuNHT94u4tUMcnXpPY2",
            "title": "Calendar title",
            "description": "Calendar description",
        }
        </pre>
    </section>
    <section>
        <h2>Event Categories</h2>
        <h3>End Points</h3>
        <dl>
            <dt><b>GET /api/event_categories/</b><dt>
            <dd>
                <p>List all event categories.</p>
            </dd>
        </dl>
        <h3>Event category structure</h3>
        <pre>
        {
            "id": 42,
            "slug": "event-category-label",
            "label": "Event category label",
        }
        </pre>
    </section>
    <section>
        <h2>Events</h2>
        <h3>End Points</h3>
        <dl>
            <dt><b>GET /api/events/</b><dt>
            <dd>
                <p>List all events.</p>
            </dd>
        </dl>
        <h3>Event structure</h3>
        <pre>
        {
            "activity": 42,
            "calendar": "v29JAFRgurmahR9yfb49dd",
            "category": [
                "category-slug"
            ],
            "description": "description",
            "organization": "dRLgY2P9BNxvKybV7rdnCm",
            "organizations": [
                "4tUucuNHMnpP9X4kY2Tn4", …
            ],
            "other_organizations": "Other organizations",
            "source_info": "Source info",
            "title": "Title",
            "transverse_themes": [
                3, …
            ],
            "uuid": "uNHMn4kY2TucpP9n44tUX",
            "zoom_on": false
        }
        </pre>
    </section>
</body>
</html>
